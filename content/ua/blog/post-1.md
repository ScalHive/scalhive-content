---
title: "Розробка на основі стовбуру (Trunk): Вступ"
date: 2024-01-29T21:00:00+02:00
type: article
featured_image: '/static-blog-images/post-1/banner.png'
keywords: ['trunk', 'розробка', 'VCS', 'робота']
---
## {{< color-text text="Вступ:" >}}
**Розробка на основі стовбуру (Trunk)** не є новою моделлю розгалуження. Слово «стовбур» відноситься до поняття зростаючого 
дерева, де найтовстішим і найдовшим прольотом є стовбур, а не гілки, які радіально відходять від нього та мають меншу 
довжину. З середини дев’яностих це була менш відома розгалужена модель вибору, а з вісімдесятих її розглядали тактично. 
Найбільші організації-розробники, такі як _Google_ (як згадувалося) і _Facebook_, масштабно _практикують це_. За 30 
років різні досягнення технологій керування джерелами та пов’язаних інструментів/технік зробили _trunk-розробку_ 
більш (іноді менш) поширеною, але це була розгалужена модель, якої багато хто дотримувався протягом багатьох років.

## {{< color-text text="Спільні гілки за межами основної/Trunk лінії погані при будь-якій частоті випуску: " >}}
{{< img src="/blog-images/post-1/figure-1.png" css_class="img-scale-down">}}

## {{< color-text text="Розробка на основі Trunk для невеликих команд: " >}}
{{< img src="/blog-images/post-1/figure-2.png" css_class="img-scale-down">}}

## {{< color-text text="Масштабована Trunk-Розробка: " >}}
{{< img src="/blog-images/post-1/figure-3.png" css_class="img-scale-down">}}

## {{< color-text text="Розробка, Твердження та Застереження:: " >}}
{{< img src="/blog-images/post-1/figure-4.png" css_class="img-scale-down">}}

Розробка на основі Trunk є ключовим засобом 
{{< color-link link_title="Безперервної Інтеграції" path="https://trunkbaseddevelopment.com/continuous-integration/" >}} 
та {{< color-link link_title="Безперервної Доставки" path="https://trunkbaseddevelopment.com/continuous-delivery/" >}}. 
Коли окремі члени команди вносять свої зміни до стовбура кілька разів на день, стає легко задовольнити основну вимогу 
безперервної інтеграції, згідно з якою всі члени команди вносять зміни в стовбур принаймні раз на 24 години. Це 
гарантує, що кодова база завжди доступна для випуску на вимогу, і допомагає втілити безперервну доставку в реальність.

Розмежування між Trunk-Based Development для невеликих команд і та масштабованою розробкою на основі Trunk-Based Development залежить від розміру команди та частоти комітів. Точний момент, коли команда розробників перестає бути "невеликою" і переходить до "масштабну", є предметом обговорення практиків. Незалежно від цього, команди виконують повну збірку (компіляцію, модульні тести, інтеграційні тести) на своїх робочих станціях перед тим, як здійснити коміт або пуш, щоб інші (або боти) могли їх бачити.

**Твердження**
* Замість GitFlow та інших моделей розгалуження, які мають кілька тривалих розгалужень, слід виконувати розробку на 
основі Trunk
* Ви можете зробити фіксацію/надіслання безпосередньо до каналу (в невеликих групах) або робочий процес Pull-Request, 
якщо ці гілки-функції недовговічні та створені однією особою.

**Застереження**
* Залежно від розміру команди та кількості комітів, {{< color-link link_title="короткострокові гілки функцій" path="https://trunkbaseddevelopment.com/short-lived-feature-branches/" >}}
використовуються для перегляду коду та перевірки збірки (CI), але не для створення чи публікації артефактів, які 
відбуваються до того, як коміти потраплять у стовбур, щоб інші розробники могли не залежати від них. Такі гілки 
дозволяють розробникам {{< color-link link_title="активно та безперервно переглядати код" path="https://trunkbaseddevelopment.com/continuous-review/" >}} 
внесків до того, як їхній код буде інтегровано в стовбур. Дуже невеликі команди можуть здійснювати 
{{< color-link link_title="прямі коміти в стовбурі" path="https://trunkbaseddevelopment.com/committing-straight-to-the-trunk/" >}}.
* Залежно від передбачуваної частоти випуску, можуть існувати {{< color-link link_title="гілки релізу" path="/ua/blog/post-2/" >}}, 
які витягуються зі стовбура своєчасно, «зміцнюються» перед випуском (це не є командною діяльністю), і **ці гілки через 
деякий час видаляються** після релізу. Крім того, також може не бути гілок релізу, якщо команда робить 
{{< color-link link_title="реліз зі стовбура" path="https://trunkbaseddevelopment.com/release-from-trunk/" >}} та вибирає
стратегію «виправлення вперед» для виправлення помилок. Реліз від стовбура також актуальний для високопродуктивних команд.
* Команди повинні довше освоювати пов’язану гілку за допомогою техніки абстрагування, щоб досягти змін, і 
використовувати позначки функцій у повсякденній розробці, щоб забезпечити хеджування (hedging) порядку випусків (а також 
інші хороші речі – дивіться одночасну розробку послідовних випусків).
* Якщо у вас є більше ніж пара розробників у проекті, вам потрібно буде підключити сервер збірки, щоб переконатися, що 
їхні коміти **не зламали збірку** після того, як вони потраплять у стовбур, а також коли вони будуть готові до 
об’єднання назад у стовбур із короткочасної гілки функції.
* Команди розробників можуть збільшуватись або зменшуватись у розмірах (у стовбурі), не впливаючи на пропускну здатність
або якість. Доказ? Google займається розробкою на основі стовбуру і має **35 000 розробників і автоматизаторів контролю 
якості** в цьому єдиному стовбурі монорепо, який у своєму випадку може розширюватися або скорочуватися відповідно до розробника.
* Люди, які практикують модель розгалуження GitHub-flow, відчують, що це дуже схоже, але є одна невелика різниця
навколо того звідки робити реліз.
* Люди, які практикують модель розгалуження Gitflow, побачать, що це зовсім інше, як і багато розробників, які звикли 
до популярних моделей розгалуження минулого ClearCase, Subversion, Perforce, StarTeam, VCS.
* Багато публікацій пропагують розробку на основі Trunk, як ми її тут описуємо. До них належать бестселери 
«Continuous Delivery» і «DevOps Handbook». Це точно більше не повинно викликати суперечок!

## {{< color-text text="Короткий підсумок" >}}
Модель розгалуження з керуванням вихідним кодом, де розробники співпрацюють над кодом в одній гілці під назвою «Trunk», 
протистоїть будь-якому тиску щодо створення інших довготривалих розгалужень розробки, використовуючи задокументовані 
методи. Тому вони уникають пекла злиття, не руйнують збірку, живуть довго і щасливо.

### {{< color-text text="Посилання на першоджерело: " >}}
* https://trunkbaseddevelopment.com/
